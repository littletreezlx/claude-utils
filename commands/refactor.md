---
description: 文件/类级别重构 ultrathink

---

# 文件/类级别重构

## 核心目标
优化单个文件或类的代码质量，保持功能不变。

## 重构原则
- **功能保持**: 不改变外部行为
- **够用即可**: 不要过度设计，简单实用优先
- **快速执行**: 30分钟内完成

## 关注重点
- 长函数 (>60行) → 拆分
- 重复代码 → 提取
- 复杂条件 → 简化
- 命名混乱 → 重命名
- 嵌套过深 (>4层) → 提前返回

## 重要约束
- **不要过度设计**: 不要为了"可能的未来"而抽象
- **不要过度优化**: 没有性能问题不要优化
- **单文件范围**: 不调整跨文件结构
- **接口稳定**: 不改变公共接口

## 何时升级
- 需要调整多个文件协作 → `/refactor-module`（DAG 模式）
- 需要重新设计模块架构 → `/refactor-module`（DAG 模式）
- 需要调整整体项目结构 → `/refactor-project`（DAG 模式）

## 相关文档
- **模块级重构**：`@refactor-module.md`（DAG 模式，支持断点续传和状态管理）
- **项目级重构**：`@refactor-project.md`（DAG 模式，支持并行重构多模块）
- **任务工作流架构**：`@CLAUDE.md` 的"任务工作流架构"章节
