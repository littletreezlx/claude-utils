# 单元测试运行与修复

## 目标
运行项目的所有单元测试，识别并修复失败的测试用例。

## 执行流程

### 1. 测试运行
- 定位项目的单元测试运行命令（如 `npm test`, `pytest`, `go test` 等）
- 执行所有单元测试并收集结果
- 记录失败的测试用例和错误信息

### 2. 问题诊断
对每个失败的测试进行分析，区分问题类型：

**代码实现问题**：
- 业务逻辑错误
- 边界条件处理不当
- 依赖注入或mock配置错误
- 异步处理问题

**测试设计问题**：
- 测试断言不合理
- 测试数据过时或不正确
- 测试环境配置问题
- 测试用例与实际需求不符

### 3. 修复策略
- **代码问题**: 修改源代码，确保符合预期行为
- **测试问题**: 更新测试用例，使其符合实际需求
- **设计问题**: 重构测试，提高可维护性和准确性

### 4. 验证与报告
- 修复后重新运行测试确保通过
- 确保修复没有引入新的问题
- 输出测试结果摘要

## 成功标准
- 所有单元测试通过
- 或者，对于合理的失败，提供清晰的问题报告和建议

## 输出格式
```markdown
## 单元测试执行结果

**测试总数**: X
**通过**: Y
**失败**: Z

### 已修复的问题
1. [测试名称] - [问题类型] - [修复说明]
...

### 遗留问题（如有）
1. [测试名称] - [问题描述] - [建议方案]
...
```

## 约束条件
- 优先修复明显的代码bug，谨慎修改测试用例
- 修改测试用例前要理解原始设计意图
- 保持测试的独立性和确定性
- 避免过度mock导致测试失去价值
