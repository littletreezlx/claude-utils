# 文档清理和归档命令

扫描项目根目录中的临时总结文件，评估其价值，并提供归档建议或清理方案。

## 执行流程

### 第一步：扫描临时文件（5分钟）

扫描项目根目录，识别可能的临时总结文件：

**识别模式**：
- 文件名包含日期：`*-2024-*.md`, `*-20241104.md`
- 常见临时名称：`summary.md`, `notes.md`, `todo.md`, `refactor-*.md`
- Debug 相关：`debug-*.md`, `log-*.md`, `bugfix-*.md`
- 其他临时命名：`temp-*.md`, `draft-*.md`

**排除文件**：
- `README.md`
- `CHANGELOG.md`
- `CLAUDE.md`
- `docs/` 目录下的文件（已归档）
- `.github/` 目录下的文件

**输出**：临时文件列表及基本信息（文件名、大小、创建时间）

### 第二步：内容分析和价值评估（10分钟）

对每个临时文件进行分析：

#### 2.1 内容分类
判断文档类型：
- **架构决策**：描述了设计选择和原因
- **功能说明**：新功能的实现细节
- **重构记录**：重构的范围、影响、决策
- **API 变更**：API 接口的修改说明
- **故障排查**：问题诊断和解决方案
- **开发日志**：日常开发流水账
- **临时笔记**：无长期价值的临时记录

#### 2.2 价值评估
评估每个文档的价值：

**高价值** ⭐⭐⭐（必须保留）：
- 记录了重要的架构决策和原因
- 解决了复杂问题的方案
- 新功能的完整实现说明
- 有助于理解代码设计意图的内容

**中等价值** ⭐⭐（建议保留）：
- 常见问题的解决方案
- API 使用说明
- 配置说明

**低价值** ⭐（可以删除）：
- 已经在代码或其他文档中体现的内容
- 过时的信息
- 简单的 bug 修复记录
- 日常开发流水账

**无价值** ❌（应该删除）：
- 完全过时的内容
- 重复的信息
- 临时测试笔记
- 空文件或极少内容

#### 2.3 归档位置建议

根据内容类型建议归档位置：

| 内容类型 | 推荐位置 | 示例 |
|---------|---------|------|
| 架构决策 | `docs/architecture/` | `docs/architecture/payment-redesign.md` |
| 功能说明 | `docs/features/` 或功能映射 | `docs/features/user-auth.md` |
| API 文档 | `docs/api/` | `docs/api/payment-api.md` |
| 故障排查 | `docs/troubleshooting/` | `docs/troubleshooting/common-issues.md` |
| 重构记录 | `docs/refactoring/` | `docs/refactoring/2024-q4.md` |

**输出**：
- 每个文件的价值评分
- 内容类型分类
- 建议的归档位置或删除建议
- 优先级排序

### 第三步：生成整理方案（5分钟）

输出具体的整理行动计划：

```markdown
## 文档整理方案

### 📊 扫描结果

- 发现临时文件：X 个
- 高价值文档：X 个
- 中等价值文档：X 个
- 低价值文档：X 个
- 建议删除：X 个

### 🎯 整理行动计划

#### 高优先级（本周完成）

1. **`refactor-payment-2024-10-01.md`** → 归档到 `docs/architecture/payment-redesign.md`
   - 价值：⭐⭐⭐ 高
   - 类型：架构决策
   - 原因：记录了支付模块重构的重要决策
   - 行动：
     ```bash
     mkdir -p docs/architecture
     mv refactor-payment-2024-10-01.md docs/architecture/payment-redesign.md
     # 编辑文件，移除临时内容，保留核心决策
     ```

2. **`api-changes.md`** → 合并到 `docs/api/README.md`
   - 价值：⭐⭐ 中
   - 类型：API 文档
   - 原因：有用的 API 变更说明
   - 行动：
     ```bash
     mkdir -p docs/api
     cat api-changes.md >> docs/api/README.md
     rm api-changes.md
     ```

#### 中优先级（本月完成）

3. **`debug-log-2024-10-15.md`** → 提取有价值部分到 `docs/troubleshooting/common-issues.md`
   - 价值：⭐⭐ 中
   - 类型：故障排查
   - 原因：包含一个重要的 bug 解决方案
   - 行动：手动提取关键部分，然后删除原文件

#### 低优先级（可选）

4. **`summary-2024-09-20.md`** → 删除
   - 价值：⭐ 低
   - 原因：内容已过时，无长期价值
   - 行动：`rm summary-2024-09-20.md`

5. **`notes.md`** → 删除
   - 价值：❌ 无
   - 原因：临时笔记，无实际内容
   - 行动：`rm notes.md`

### 📁 需要创建的目录结构

```bash
mkdir -p docs/architecture
mkdir -p docs/features
mkdir -p docs/api
mkdir -p docs/troubleshooting
```

### ✅ 预期结果

整理后的项目结构：
```
项目根目录/
├── docs/
│   ├── architecture/
│   │   └── payment-redesign.md     # 从临时文件整理而来
│   ├── api/
│   │   └── README.md               # 合并了 api-changes.md
│   └── troubleshooting/
│       └── common-issues.md        # 提取了有价值的调试经验
├── README.md
└── (根目录干净整洁)
```
```

## 整理原则

1. **价值优先**：高价值内容必须保留，低价值内容果断删除
2. **分类归档**：按内容类型归档到对应目录
3. **合并整合**：优先合并到现有文档，而非创建新文件
4. **提炼精华**：归档时移除临时性内容，保留核心价值
5. **保持简洁**：根目录只保留必要的顶层文档

## 执行建议

### 自动整理 vs 手动整理

**建议手动整理**（更安全）：
- 根据上述方案逐个处理
- 确认内容后再移动或删除
- 避免误删重要信息

**如需自动整理**：
- 仅对明确无价值的文件（❌）执行自动删除
- 高价值文件（⭐⭐⭐）需要手动确认归档位置

## 注意事项

- **不要删除未分析的文件**
- **归档前先创建对应目录**
- **建议先 git commit 当前状态**（便于回滚）
- **归档时可以精简内容**（只保留核心价值）
- **如果不确定，保留文件并标注待处理**

## 开始清理

现在开始扫描项目根目录的临时文件，分析内容并生成整理方案。
