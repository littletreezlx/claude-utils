---
description: 逆向产品分析，生成 Gemini 上下文文档 ultrathink
---

# 项目逆向产品分析 (Context for Gemini)

## 目标

通过阅读代码进行**逆向产品逻辑分析**，生成一份面向产品合伙人（Gemini）的上下文文档。
用产品语言描述，而非技术实现细节。

## 输出文件

`${项目名}-context-for-gemini.md`

---

## 文档结构

### 1. 快速状态总览 (TL;DR)

**必须放在文档开头**，避免 Gemini 误判项目进度：

- 当前阶段、各平台完成度
- 核心已实现功能速查表（表格形式）
- 已知缺口（标注影响和优先级）
- 下一步可选方向（等待 Gemini 决策）

### 2. 产品识别与灵魂

- 一句话定义（从 README/代码注释推断）
- 核心设计隐喻、情感目标
- 开发方法论（从代码注释逆向推断）

### 3. 核心界面与交互逻辑

- 主页面构成（扫描入口文件推断）
- 核心功能流（Mermaid 时序图展示完整逻辑链条）
- 交互隐喻还原（从 Widget 结构推断）

### 4. 深度特性分析（选 1-2 个最有特色的功能）

每个特性分析：
- **技术实现 (The "How")**：实现方式、依赖插件、用户体验
- **产品理念 (The "Why")**：从代码细节推断设计思路

### 5. 关键交互质感

- 物理反馈 (Haptics)：触发场景和体验评价
- 声音设计 / 静音哲学
- 动效细节：最打动人的动画及其情感目标

### 6. 技术架构支撑（产品视角）

- 数据流向（Mermaid 图 + 用户体验描述）
- 关键约束（Local-First / Offline-ready 等产品承诺是否兑现）

### 7. 现状与待办

- 已完成的核心闭环
- TODO/FIXME 扫描结果
- 功能性缺口和优先级

---

## 质量标准

1. **产品语言优先**：用用户体验描述，而非代码路径
2. **避免代码路径**：Gemini 是产品合伙人，不需要 `lib/core/xxx.dart:123`
3. **完整性**：不遗漏"快速状态总览"
4. **可操作性**："下一步可选方向"必须包含优先级
5. **图表用 Mermaid**

## 执行前必做

- 先扫描 `docs/` 目录，查找已有的完成文档
- 在文档开头添加"快速状态总览"
