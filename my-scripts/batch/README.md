# Claude Code æ‰¹é‡æ‰§è¡Œå™¨

æœ¬å·¥å…·é›†åŒ…å«ä¸¤ä¸ªæ‰¹é‡æ‰§è¡Œå™¨ï¼Œç”¨äºŽæ‰¹é‡æ‰§è¡Œ Claude Code å’Œ Codex å‘½ä»¤ï¼Œæ”¯æŒä¸²è¡Œå’Œå¹¶è¡Œæ‰§è¡Œæ¨¡å¼ã€‚

## æž¶æž„è®¾è®¡

### é€šç”¨åŸºç±»æž¶æž„

é€šè¿‡æŠ½è±¡é€šç”¨é€»è¾‘ï¼Œå®žçŽ°äº†ä»£ç å¤ç”¨å’Œç»´æŠ¤æ€§æå‡ï¼š

```
BaseBatchExecutor (æŠ½è±¡åŸºç±»)
â”œâ”€â”€ é€šç”¨åŠŸèƒ½ï¼šè¿›åº¦ç›‘æŽ§ã€å¹¶è¡Œ/ä¸²è¡Œæ‰§è¡Œã€ç»“æžœç»Ÿè®¡
â”œâ”€â”€ æŠ½è±¡æ–¹æ³•ï¼šextract_commands(), build_command()
â””â”€â”€ å­ç±»å®žçŽ°ï¼š
    â”œâ”€â”€ ClaudeCodeBatchExecutor (batchcc.py)
    â””â”€â”€ CodexBatchExecutor (batchcx.py)
```

### æ ¸å¿ƒç»„ä»¶

1. **BaseBatchExecutor**: é€šç”¨æ‰¹é‡æ‰§è¡ŒåŸºç±»
   - è¿›åº¦ç›‘æŽ§å’Œä»»åŠ¡ç®¡ç†
   - å¹¶è¡Œ/ä¸²è¡Œæ‰§è¡Œå¼•æ“Ž
   - ç»“æžœç»Ÿè®¡å’Œå±•ç¤º

2. **ProgressMonitor**: å®žæ—¶è¿›åº¦ç›‘æŽ§å™¨
   - ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€è·Ÿè¸ª
   - å®žæ—¶è¿›åº¦æ˜¾ç¤º

3. **TaskResult**: ä»»åŠ¡æ‰§è¡Œç»“æžœæ•°æ®ç±»
   - æ ‡å‡†åŒ–ç»“æžœæ ¼å¼
   - è¯¦ç»†çš„æ‰§è¡Œä¿¡æ¯

## å·¥å…·ä½¿ç”¨

### batchcc.py - Claude Code æ‰¹é‡æ‰§è¡Œå™¨

ç”¨äºŽæ‰¹é‡æ‰§è¡Œ Claude Code å‘½ä»¤ï¼Œè‡ªåŠ¨å°† `cc '...'` æ ¼å¼è½¬æ¢ä¸º claude å‘½ä»¤ã€‚

```bash
# é»˜è®¤å¹¶è¡Œæ‰§è¡Œ (8ä¸ªå¹¶å‘)
python batchcc.py

# ä¸²è¡Œæ‰§è¡Œ
python batchcc.py --single

# è‡ªå®šä¹‰å¹¶å‘æ•°
python batchcc.py -p 4

# æŒ‡å®šæ¨¡æ¿æ–‡ä»¶
python batchcc.py /path/to/template -p 2
```

**æ¨¡æ¿æ–‡ä»¶æ ¼å¼ç¤ºä¾‹ï¼š**
```
## TASK ##
æ–°å»ºä¸€ä¸ªtest.pyæ–‡ä»¶ï¼Œå†…å®¹ä¸ºhello world

## TASK ##
ä¿®æ”¹package.jsonï¼Œæ·»åŠ æ–°çš„ä¾èµ–åŒ…
ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬

## TASK ##
åˆ›å»ºä¸€ä¸ªç®€å•çš„APIæŽ¥å£
æ”¯æŒGETå’ŒPOSTè¯·æ±‚
```

### batchcx.py - Codex æ‰¹é‡æ‰§è¡Œå™¨

ç”¨äºŽæ‰¹é‡æ‰§è¡Œ Codex å‘½ä»¤ï¼Œè‡ªåŠ¨æ·»åŠ  `--skip-git-repo-check` å‚æ•°ã€‚

```bash
# é»˜è®¤å¹¶è¡Œæ‰§è¡Œ (8ä¸ªå¹¶å‘)
python batchcx.py

# ä¸²è¡Œæ‰§è¡Œ
python batchcx.py --single

# è‡ªå®šä¹‰å¹¶å‘æ•°
python batchcx.py -p 4

# æŒ‡å®šæ¨¡æ¿æ–‡ä»¶
python batchcx.py /path/to/template -p 2
```

**æ¨¡æ¿æ–‡ä»¶æ ¼å¼ç¤ºä¾‹ï¼š**
```
## TASK ##
æ–°å»ºä¸€ä¸ª2.txtæ–‡ä»¶

## TASK ##
ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ æ–°çš„é€‰é¡¹
ç¡®ä¿å…¼å®¹æ€§

## TASK ##
åˆ›å»ºä¸€ä¸ªshellè„šæœ¬
æ”¯æŒå‚æ•°ä¼ é€’
```

## ç»Ÿä¸€æ¨¡æ¿æ ¼å¼ â­

### ç®€åŒ–çš„ä»»åŠ¡æè¿°æ ¼å¼
ä¸¤ä¸ªè„šæœ¬çŽ°åœ¨ä½¿ç”¨ç›¸åŒçš„æ¨¡æ¿æ ¼å¼ï¼Œåªéœ€è¦çº¯ä»»åŠ¡æè¿°ï¼Œæ— éœ€é¢„å…ˆå†™å‘½ä»¤ï¼š

```
## TASK ##
ä»»åŠ¡æè¿°ç¬¬ä¸€è¡Œ
å¯é€‰çš„è¯¦ç»†è¯´æ˜Žç¬¬äºŒè¡Œ
å¯é€‰çš„æ›´å¤šè¦æ±‚

## TASK ##
å¦ä¸€ä¸ªä»»åŠ¡æè¿°
```

### è‡ªåŠ¨å‘½ä»¤è½¬æ¢

#### Claude Code å‘½ä»¤è½¬æ¢ (batchcc.py)
- æ¨¡æ¿ä¸­ï¼š`åˆ›å»ºä¸€ä¸ªtest.pyæ–‡ä»¶ï¼Œå†…å®¹ä¸ºhello world`
- è‡ªåŠ¨è½¬æ¢ä¸ºï¼š`cc 'åˆ›å»ºä¸€ä¸ªtest.pyæ–‡ä»¶ï¼Œå†…å®¹ä¸ºhello world'`
- æœ€ç»ˆæ‰§è¡Œï¼š`/path/to/claude -p "åˆ›å»ºä¸€ä¸ªtest.pyæ–‡ä»¶..." --allowedTools "*" --permission-mode acceptEdits`

#### Codex å‘½ä»¤è½¬æ¢ (batchcx.py)
- æ¨¡æ¿ä¸­ï¼š`æ–°å»ºä¸€ä¸ª2.txtæ–‡ä»¶`
- è‡ªåŠ¨è½¬æ¢ä¸ºï¼š`codex exec "æ–°å»ºä¸€ä¸ª2.txtæ–‡ä»¶" --skip-git-repo-check --yolo`

### å¼•å·å¤„ç†
- è‡ªåŠ¨è½¬ä¹‰å†…éƒ¨å¼•å·ï¼Œé¿å…å‘½ä»¤è§£æžé”™è¯¯
- æ”¯æŒå¤æ‚çš„ä»»åŠ¡æè¿°ï¼ŒåŒ…å«ç‰¹æ®Šå­—ç¬¦

## åŠŸèƒ½ç‰¹æ€§

### æ‰§è¡Œæ¨¡å¼
- **å¹¶è¡Œæ¨¡å¼**ï¼šé»˜è®¤8ä¸ªå¹¶å‘ï¼Œæ”¯æŒè‡ªå®šä¹‰å¹¶å‘æ•°
- **ä¸²è¡Œæ¨¡å¼**ï¼šé€ä¸ªæ‰§è¡Œï¼Œä¿æŒåŽŸæœ‰è¾“å‡ºæ ¼å¼
- **æ™ºèƒ½è¶…æ—¶**ï¼šå•ä¸ªä»»åŠ¡5åˆ†é’Ÿè¶…æ—¶ä¿æŠ¤

### è¿›åº¦ç›‘æŽ§
- å®žæ—¶è¿›åº¦æ˜¾ç¤º
- è¿è¡Œä»»åŠ¡è®¡æ•°
- æ‰§è¡Œæ—¶é—´ç»Ÿè®¡
- å®Œæ•´ç»“æžœæ±‡æ€»

### é”™è¯¯å¤„ç†
- è¶…æ—¶æ£€æµ‹å’Œæ¢å¤
- è¯¦ç»†é”™è¯¯ä¿¡æ¯è®°å½•
- å¤±è´¥ä»»åŠ¡å•ç‹¬ç»Ÿè®¡

### æ¨¡æ¿è§£æž
- æ”¯æŒå¤šè¡Œå‘½ä»¤è§£æž
- æ­£åˆ™è¡¨è¾¾å¼å’Œé€è¡Œè§£æžåŒé‡ä¿éšœ
- è‡ªåŠ¨æ¸…ç†å‘½ä»¤æ ¼å¼

## ä½¿ç”¨ç¤ºä¾‹

### 1. åˆ›å»ºæ¨¡æ¿æ–‡ä»¶
```bash
cat > template << EOF
## TASK ##
åˆ›å»ºä¸€ä¸ªåä¸ºutils.pyçš„å·¥å…·æ–‡ä»¶
åŒ…å«åŸºæœ¬çš„å·¥å…·å‡½æ•°æ¡†æž¶

## TASK ##
åœ¨utils.pyä¸­æ·»åŠ ä¸€ä¸ªformat_dateå‡½æ•°
æ”¯æŒå¤šç§æ—¥æœŸæ ¼å¼

## TASK ##
åˆ›å»ºtest_utils.pyæµ‹è¯•æ–‡ä»¶
åŒ…å«å®Œæ•´çš„å•å…ƒæµ‹è¯•

## TASK ##
è¿è¡Œæµ‹è¯•å¹¶ä¿®å¤ä»»ä½•é—®é¢˜
ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
EOF
```

### 2. æ‰§è¡Œæ‰¹é‡ä»»åŠ¡
```bash
# å¹¶è¡Œæ‰§è¡Œæ‰€æœ‰ä»»åŠ¡
python batchcc.py template -p 4

# æŸ¥çœ‹è¯¦ç»†æ‰§è¡Œç»“æžœ
# ç¨‹åºä¼šæ˜¾ç¤ºæ¯ä¸ªä»»åŠ¡çš„æ‰§è¡ŒçŠ¶æ€ã€è€—æ—¶å’Œè¾“å‡º
```

### 3. Codex ä»»åŠ¡ç¤ºä¾‹
```bash
cat > codex_template << EOF
## TASK ##
åˆ›å»ºä¸€ä¸ªREADME.mdæ–‡ä»¶
åŒ…å«é¡¹ç›®åŸºæœ¬ä¿¡æ¯

## TASK ##
æ·»åŠ é¡¹ç›®æè¿°å’Œä½¿ç”¨è¯´æ˜Ž
ç¡®ä¿æ ¼å¼æ¸…æ™°æ˜“è¯»

## TASK ##
åˆ›å»º.gitignoreæ–‡ä»¶
åŒ…å«Pythonå’ŒNode.jså¸¸è§å¿½ç•¥è§„åˆ™
EOF

python batchcx.py codex_template --single
```

## æ‰©å±•è¯´æ˜Ž

å¦‚éœ€æ·»åŠ æ–°çš„æ‰¹é‡æ‰§è¡Œå™¨ï¼Œåªéœ€ï¼š

1. ç»§æ‰¿ `BaseBatchExecutor`
2. å®žçŽ° `build_command(task_description: str)` æ–¹æ³• - å°†ä»»åŠ¡æè¿°è½¬æ¢ä¸ºå¯æ‰§è¡Œå‘½ä»¤
3. å¯é€‰é‡å†™æ‰§è¡Œæ–¹æ³•ä»¥æ”¯æŒç‰¹æ®Šçš„å‘½ä»¤è½¬æ¢é€»è¾‘ï¼ˆå¦‚ Claude Code éœ€è¦è½¬æ¢ä¸º claude å‘½ä»¤ï¼‰

### æ–°æž¶æž„ä¼˜åŠ¿ ðŸŽ¯

- **ç»Ÿä¸€æ¨¡æ¿æ ¼å¼**ï¼šæ‰€æœ‰å·¥å…·ä½¿ç”¨ç›¸åŒçš„ `## TASK ##` åˆ†å‰²æ ¼å¼
- **ç®€åŒ–ç»´æŠ¤**ï¼šåªéœ€å®žçŽ°ä¸€ä¸ª `build_command()` æ–¹æ³•
- **è‡ªåŠ¨è§£æž**ï¼šåŸºç±»è‡ªåŠ¨å¤„ç†ä»»åŠ¡æå–å’Œå¤šè¡Œæè¿°åˆå¹¶
- **å¼•å·å®‰å…¨**ï¼šè‡ªåŠ¨å¤„ç†å†…éƒ¨å¼•å·è½¬ä¹‰
- **æžç®€æ‰©å±•**ï¼šæ–°å·¥å…·åªéœ€ 15-20 è¡Œä»£ç 

ä»ŽåŽŸæ¥çš„ ~460 è¡Œé‡å¤ä»£ç ç®€åŒ–åˆ° ~20 è¡Œç‰¹å®šå®žçŽ°ï¼Œå¤§å¹…æå‡äº†å¯ç»´æŠ¤æ€§ã€‚