~/dev/temp ⌚ 15:50:46
$ autosub .
2026-01-10 15:50:49,898 - src.ffmpeg.environment - INFO - 在预定义路径中找到可执行文件: /opt/homebrew/bin/ffmpeg
2026-01-10 15:50:49,898 - src.ffmpeg.environment - INFO - 在预定义路径中找到可执行文件: /opt/homebrew/bin/ffprobe
2026-01-10 15:50:51,259 - SubtitleExtractor - INFO - 字幕提取协调器初始化开始...
2026-01-10 15:50:51,383 - src.ffmpeg.environment - INFO - FFmpeg 版本检查成功: ffmpeg version 8.0 Copyright (c) 2000-2025 the FFmpeg developers
2026-01-10 15:50:51,383 - SubtitleExtractor - INFO - 核心依赖 FFmpeg 检查通过。
2026-01-10 15:50:51,383 - MKVExtractor - INFO - MKV字幕提取器已准备就绪。
2026-01-10 15:50:51,384 - FFmpegExtractor - INFO - FFmpeg字幕提取器已准备就绪。
2026-01-10 15:50:51,384 - PGSExtractor - INFO - PGS字幕提取器已准备就绪。
2026-01-10 15:50:51,384 - CCExtractorExtractor - INFO - CCExtractor字幕提取器已准备就绪。
2026-01-10 15:50:51,384 - WhisperExtractor - INFO - Whisper字幕提取器已准备就绪。默认模型: base
2026-01-10 15:50:51,384 - SubtitleExtractor - INFO - 已注册 5 个具体字幕提取器:
2026-01-10 15:50:51,384 - SubtitleExtractor - INFO -   - MKVExtractor
2026-01-10 15:50:51,384 - SubtitleExtractor - INFO -   - FFmpegExtractor
2026-01-10 15:50:51,384 - SubtitleExtractor - INFO -   - PGSExtractor
2026-01-10 15:50:51,384 - SubtitleExtractor - INFO -   - CCExtractorExtractor
2026-01-10 15:50:51,384 - SubtitleExtractor - INFO -   - WhisperExtractor
2026-01-10 15:50:51,384 - SubtitleExtractor - INFO - 字幕提取协调器初始化完成。
2026-01-10 15:50:51,789 - auto_sub.LoggingManager - INFO - 日志系统初始化完成 - 级别: INFO, 控制台: True, 文件: True
2026-01-10 15:50:51,790 - auto_sub.AutoSubCLI - INFO - 日志系统初始化完成 - 级别: INFO
2026-01-10 15:50:51,790 - auto_sub.AutoSubCLI - INFO - auto_sub 启动 - 版本: 0.2.0
2026-01-10 15:50:51,790 - auto_sub.AutoSubCLI - INFO - 参数 - 输入: /Users/zhanglingxiao/dev/temp
2026-01-10 15:50:51,790 - auto_sub.AutoSubCLI - INFO - 选项 - 嵌入: False, 重命名: False, 强制: False
2026-01-10 15:50:51,790 - auto_sub.AutoSubCLI - INFO - 验证 FFmpeg 环境...
2026-01-10 15:50:51,876 - src.ffmpeg.environment - INFO - FFmpeg 版本检查成功: ffmpeg version 8.0 Copyright (c) 2000-2025 the FFmpeg developers
2026-01-10 15:50:51,876 - auto_sub.AutoSubCLI - INFO - FFmpeg 环境验证通过
2026-01-10 15:50:51,876 - auto_sub.AutoSubCLI - INFO - 处理目录: /Users/zhanglingxiao/dev/temp
2026-01-10 15:50:51,879 - MediaFileManager - INFO - 在目录 '/Users/zhanglingxiao/dev/temp' 中找到 1 个视频文件
2026-01-10 15:50:51,879 - auto_sub.AutoSubCLI - INFO - 找到 1 个视频文件
2026-01-10 15:50:51,879 - SubtitleExtractor - INFO - 字幕提取协调器初始化开始...
2026-01-10 15:50:51,963 - src.ffmpeg.environment - INFO - FFmpeg 版本检查成功: ffmpeg version 8.0 Copyright (c) 2000-2025 the FFmpeg developers
2026-01-10 15:50:51,964 - SubtitleExtractor - INFO - 核心依赖 FFmpeg 检查通过。
2026-01-10 15:50:51,964 - MKVExtractor - INFO - MKV字幕提取器已准备就绪。
2026-01-10 15:50:51,964 - FFmpegExtractor - INFO - FFmpeg字幕提取器已准备就绪。
2026-01-10 15:50:51,964 - PGSExtractor - INFO - PGS字幕提取器已准备就绪。
2026-01-10 15:50:51,964 - CCExtractorExtractor - INFO - CCExtractor字幕提取器已准备就绪。
2026-01-10 15:50:51,964 - WhisperExtractor - INFO - Whisper字幕提取器已准备就绪。默认模型: base
2026-01-10 15:50:51,964 - SubtitleExtractor - INFO - 已注册 5 个具体字幕提取器:
2026-01-10 15:50:51,964 - SubtitleExtractor - INFO -   - MKVExtractor
2026-01-10 15:50:51,964 - SubtitleExtractor - INFO -   - FFmpegExtractor
2026-01-10 15:50:51,964 - SubtitleExtractor - INFO -   - PGSExtractor
2026-01-10 15:50:51,965 - SubtitleExtractor - INFO -   - CCExtractorExtractor
2026-01-10 15:50:51,965 - SubtitleExtractor - INFO -   - WhisperExtractor
2026-01-10 15:50:51,965 - SubtitleExtractor - INFO - 字幕提取协调器初始化完成。
2026-01-10 15:50:52,074 - auto_sub.DeepSeekTranslator - INFO - DeepSeek 翻译器初始化 | 模型=deepseek-chat, 批大小=20, 上下文窗口=5, 并行=启用
2026-01-10 15:50:52,075 - auto_sub.SubtitleTranslator - INFO - 字幕翻译器初始化完成 - 模型: deepseek-chat, 批大小: 20, 并行: 启用
2026-01-10 15:50:52,148 - src.ffmpeg.environment - INFO - FFmpeg 版本检查成功: ffmpeg version 8.0 Copyright (c) 2000-2025 the FFmpeg developers
2026-01-10 15:50:52,149 - SubtitleEmbedder - INFO - 字幕嵌入器初始化成功
处理: 03.mkv:   0%|                                                                     | 0/1 [00:00<?, ?视频/s]2026-01-10 15:50:52,182 - auto_sub.VideoProcessor - INFO - 开始处理视频: 03.mkv
2026-01-10 15:50:52,183 - SubtitleExtractor - INFO - 字幕提取协调器初始化开始...
2026-01-10 15:50:52,250 - src.ffmpeg.environment - INFO - FFmpeg 版本检查成功: ffmpeg version 8.0 Copyright (c) 2000-2025 the FFmpeg developers
2026-01-10 15:50:52,250 - SubtitleExtractor - INFO - 核心依赖 FFmpeg 检查通过。
2026-01-10 15:50:52,250 - MKVExtractor - INFO - MKV字幕提取器已准备就绪。
2026-01-10 15:50:52,250 - FFmpegExtractor - INFO - FFmpeg字幕提取器已准备就绪。
2026-01-10 15:50:52,250 - PGSExtractor - INFO - PGS字幕提取器已准备就绪。
2026-01-10 15:50:52,250 - CCExtractorExtractor - INFO - CCExtractor字幕提取器已准备就绪。
2026-01-10 15:50:52,250 - WhisperExtractor - INFO - Whisper字幕提取器已准备就绪。默认模型: base
2026-01-10 15:50:52,251 - SubtitleExtractor - INFO - 已注册 5 个具体字幕提取器:
2026-01-10 15:50:52,251 - SubtitleExtractor - INFO -   - MKVExtractor
2026-01-10 15:50:52,251 - SubtitleExtractor - INFO -   - FFmpegExtractor
2026-01-10 15:50:52,251 - SubtitleExtractor - INFO -   - PGSExtractor
2026-01-10 15:50:52,251 - SubtitleExtractor - INFO -   - CCExtractorExtractor
2026-01-10 15:50:52,251 - SubtitleExtractor - INFO -   - WhisperExtractor
2026-01-10 15:50:52,251 - SubtitleExtractor - INFO - 字幕提取协调器初始化完成。
2026-01-10 15:50:52,251 - SubtitleExtractor - INFO - 检查视频 '03.mkv' 是否已包含中文字幕...
2026-01-10 15:50:52,251 - src.media_info - INFO - 尝试使用 FFprobe 获取媒体信息: /opt/homebrew/bin/ffprobe -v quiet -print_format json -show_format -show_streams /Users/zhanglingxiao/dev/temp/03.mkv
2026-01-10 15:50:52,379 - src.media_info - INFO - 通过 FFprobe 成功获取到媒体信息。包含 3 个流。
2026-01-10 15:50:52,380 - src.media_info - INFO - 在 '03.mkv' 中找到 1 条字幕流。
2026-01-10 15:50:52,380 - SubtitleExtractor - INFO - 视频中未找到中文字幕流。
2026-01-10 15:50:52,380 - auto_sub.SubtitleExtractionStep - INFO - 开始字幕提取流程
2026-01-10 15:50:52,381 - auto_sub.SubtitleExtractionStep - INFO - 从视频中提取字幕...
2026-01-10 15:50:52,381 - SubtitleExtractor - INFO - 开始提取字幕: 03.mkv
2026-01-10 15:50:52,381 - src.media_info - INFO - 尝试使用 FFprobe 获取媒体信息: /opt/homebrew/bin/ffprobe -v quiet -print_format json -show_format -show_streams /Users/zhanglingxiao/dev/temp/03.mkv
2026-01-10 15:50:52,504 - src.media_info - INFO - 通过 FFprobe 成功获取到媒体信息。包含 3 个流。
2026-01-10 15:50:52,505 - src.media_info - INFO - 在 '03.mkv' 中找到 1 条字幕流。
2026-01-10 15:50:52,505 - src.command_runner - INFO - 准备执行命令: mkvextract --version
2026-01-10 15:50:54,842 - src.command_runner - INFO - 命令 'mkvextract --version' 执行成功。
2026-01-10 15:50:54,843 - src.command_runner - INFO - 准备执行命令: mkvmerge --version
2026-01-10 15:50:55,391 - src.command_runner - INFO - 命令 'mkvmerge --version' 执行成功。
2026-01-10 15:50:55,392 - MKVExtractor - INFO - MKVExtractor: 开始从 '03.mkv' 提取字幕到 '03_origin.srt'
2026-01-10 15:50:55,392 - MKVExtractor - INFO - 使用mkvmerge探测 '03.mkv' 中的字幕轨道...
2026-01-10 15:50:55,392 - src.command_runner - INFO - 准备执行命令: mkvmerge -i -F json /Users/zhanglingxiao/dev/temp/03.mkv
2026-01-10 15:50:55,655 - src.command_runner - INFO - 命令 'mkvmerge -i -F json /Users/zhanglingxiao/dev/temp/03.mkv' 执行成功。
2026-01-10 15:50:55,656 - MKVExtractor - INFO - 通过mkvmerge在 '03.mkv' 中找到 1 条字幕轨道。
2026-01-10 15:50:55,656 - MKVExtractor - INFO - 准备使用mkvextract提取轨道ID 2 (编码: S_TEXT/UTF8) 从 '03.mkv'...
2026-01-10 15:50:55,657 - MKVExtractor - INFO - 执行mkvextract命令: mkvextract tracks /Users/zhanglingxiao/dev/temp/03.mkv 2:/Users/zhanglingxiao/dev/temp/03_origin_track2_raw.srt
2026-01-10 15:50:55,657 - src.command_runner - INFO - 准备执行命令: mkvextract tracks /Users/zhanglingxiao/dev/temp/03.mkv 2:/Users/zhanglingxiao/dev/temp/03_origin_track2_raw.srt
2026-01-10 15:50:55,843 - src.command_runner - INFO - 命令 'mkvextract tracks /Users/zhanglingxiao/dev/temp/03.mkv 2:/Users/zhanglingxiao/dev/temp/03_origin_track2_raw.srt' 执行成功。
2026-01-10 15:50:55,844 - MKVExtractor - INFO - 轨道 2 原始字幕已成功提取至: '03_origin_track2_raw.srt'
2026-01-10 15:50:55,844 - MKVExtractor - INFO - 原始字幕已是SRT格式。将其移动到目标位置: '03_origin.srt'
2026-01-10 15:50:55,844 - SubtitleExtractor - ERROR - 提取器 MKVExtractor 失败: name 'stream_info' is not defined
2026-01-10 15:50:55,844 - FFmpegExtractor - INFO - FFmpegExtractor: 开始从 '03.mkv' 提取字幕至 '03_origin.srt'
2026-01-10 15:50:55,845 - FFmpegExtractor - INFO - 尝试使用FFmpeg提取字幕: 流 '0:2' 从 '03.mkv' 到 '03_origin.srt'
2026-01-10 15:50:55,845 - src.command_runner - INFO - 准备执行命令: /opt/homebrew/bin/ffmpeg -hide_banner -loglevel warning -i /Users/zhanglingxiao/dev/temp/03.mkv -map 0:2 -c:s srt -y /Users/zhanglingxiao/dev/temp/03_origin.srt
2026-01-10 15:50:55,979 - src.command_runner - INFO - 命令 '/opt/homebrew/bin/ffmpeg -hide_banner -loglevel warning -i /Users/zhanglingxiao/dev/temp/03.mkv -map 0:2 -c:s srt -y /Users/zhanglingxiao/dev/temp/03_origin.srt' 执行成功。
2026-01-10 15:50:55,979 - FFmpegExtractor - INFO - 字幕成功提取并保存为SRT: '03_origin.srt'
2026-01-10 15:50:55,980 - SubtitleExtractor - INFO - 字幕提取成功: FFmpegExtractor
2026-01-10 15:50:55,982 - auto_sub.TranslationStep - INFO - 翻译字幕: 03_origin.srt -> zh
2026-01-10 15:50:55,982 - auto_sub.SubtitleTranslator - INFO - 开始翻译字幕: 03_origin.srt
2026-01-10 15:50:55,986 - auto_sub.SubtitleTranslator - INFO - 加载了 27 条字幕
2026-01-10 15:50:57,759 - auto_sub.SubtitleTranslator - INFO - 准备翻译 27 条字幕 (en -> zh)
2026-01-10 15:50:57,759 - auto_sub.DeepSeekTranslator - INFO - 翻译任务 | 文本数=27/27, 目标语言=zh, 批次数=2
2026-01-10 15:50:57,759 - auto_sub.DeepSeekTranslator - INFO - 并行处理 | 批次=2, 并发=3
2026-01-10 15:50:57,765 - auto_sub.ParallelBatchCoordinator - INFO - ➤ 并行协调器启动 | 批次=2, 文本数=27, 并发=3, 超时=180.0s
                                                                                                               2026-01-10 15:51:05,561 - auto_sub.DeepSeekTranslator - INFO - 批次[0] 完成 | 翻译 7 条                        ]
                                                                                                               2026-01-10 15:51:05,563 - auto_sub.ParallelBatchCoordinator - INFO - ✓ 批次[1] 执行成功 | 文本数=7, 耗时=7.80s.8s
