# Role: Flutter Senior Engineer (UI/UX Focus)

## Context
Refactor the `RandomSelectionPage` to match the new "Warm Ceramic" design language. The goal is to create a high-fidelity, polished decision-making interface that feels physical and satisfying.

## Tech Stack Constraints
- **State Management**: Riverpod 2.0+ (ConsumerStatefulWidget).
- **Styling**: `flutter_screenutil` (must use .w, .h, .sp, .r).
- **Animation**: `flutter_animate` (for entry effects and selection logic).
- **Layout**: `CustomScrollView` with `SliverGrid`.

## Data & Logic (Refer to Feature Spec)
- **ViewModel**: `RandomViewModel` exposes `groups` (List), `currentOptions` (List), `selectionState` (Idle/Animating/Result), `finalSelectedIndex`.
- **Logic**:
    1.  **Empty Logic**:
        - If `groups.isEmpty` -> Show `_buildEmptyAllState()` (Illustration + Create Group Button).
        - If `groups.isNotEmpty` but `options.isEmpty` -> Show `_buildEmptyGroupState()` (Just the dashed Add Card in grid).
        - Else -> Show Grid of Options + Last Item as Add Card.
    2.  **Selection Logic**:
        - Use "In-Place Highlight". When animating, the grid items do NOT move.
        - The current "active" item (while iterating) gets a scale up + border.
        - When finished (`isResultVisible`), the selected item scales up (1.1x), others fade out (`opacity: 0.5`).

## Visual Implementation Details

### 1. The Scaffold & Background
- Use `Scaffold(backgroundColor: AppColors.background)`.
- Add a subtle background decoration: A radial gradient from top-center (`#FFF0E0` to `#FFFBF9`) to simulate a light source.

### 2. Header & Chips (`SliverToBoxAdapter`)
- **Title**: "随机选择", `24.sp`, `FontWeight.w700`, Color `TextPrimary`. Padding: `20.w`.
- **Chips**: Use `ListView.horizontal`.
    - **Active Chip**: White background, `Primary` border (1px), `Primary` text. Shadow: `Blur 8, Color(#FF5500).withOpacity(0.15)`.
    - **Inactive Chip**: Transparent/Grey background, `TextSecondary` text. No border.

### 3. The Grid (`SliverGrid`)
- **Padding**: `EdgeInsets.symmetric(horizontal: 20.w, vertical: 16.h)`.
- **CrossAxisCount**: 3.
- **MainAxisSpacing**: 12.h, **CrossAxisSpacing**: 12.w.
- **Item Builder**:
    - Return `GlassOptionCard` widget.
    - **Props**: `isDimmed` (bool), `isSelected` (bool), `icon`, `label`.
    - **Style**:
        - Container: White, `20.r`.
        - Shadow: `BoxShadow(color: AppColors.primary.withOpacity(0.08), blur: 12, offset: Offset(0, 4))`.
        - **Interaction**: Wrap in `ScaleButton` (scale to 0.95 on tap).

### 4. The "Add" Card (Special Grid Item)
- Render as the LAST item in the grid list.
- Style: `DottedBorder` (use a custom painter or package), Color `PrimaryLight`, Background `Primary` (opacity 0.05).
- Icon: Center `CupertinoIcons.add`, size `24.sp`.

### 5. Floating Action Button (`CompactFloatingButton`)
- **Location**: `floatingActionButtonLocation: FloatingActionButtonLocation.centerFloat`.
- **Design**:
    - Height: `56.h`, Width: `160.w`.
    - Decoration: `LinearGradient(colors: [AppColors.primaryLight, AppColors.primary])`.
    - Shadow: `BoxShadow(color: AppColors.primary.withOpacity(0.4), blur: 16, offset: Offset(0, 8))`.
- **States**:
    - **Idle**: Text "开始选择", Icon `CupertinoIcons.play_fill`.
    - **Result**: Text "换一个", Icon `CupertinoIcons.arrow_2_circlepath`.
    - **Empty**: Grey background, disabled.

## Code Structure Plan
1.  Create `GlassOptionCard.dart` (The reuseable tile).
2.  Create `EmptyStateView.dart` (The illustration view).
3.  Update `RandomSelectionPage.dart` implementing the `CustomScrollView`.

Please generate the full code for `RandomSelectionPage.dart` and the `GlassOptionCard` widget first.